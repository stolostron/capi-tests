name: Auto-assign Pull Requests

on:
  pull_request:
    types:
      - opened

permissions:
  pull-requests: write
  issues: write

jobs:
  assign-pr:
    name: Assign PR to RadekCap
    runs-on: ubuntu-latest
    timeout-minutes: 5
    if: github.event.pull_request.draft == false

    steps:
    - name: Assign PR to RadekCap
      if: github.event.pull_request.head.repo.full_name == github.repository
      run: |
        echo "PR #${{ github.event.pull_request.number }} opened by ${{ github.event.pull_request.user.login }}"
        echo "Assigning to RadekCap..."

        # Assign the PR to RadekCap using GitHub API
        gh api \
          --method POST \
          /repos/${{ github.repository }}/issues/${{ github.event.pull_request.number }}/assignees \
          -f assignees[]='RadekCap' \
          || echo "Failed to assign PR (user may not have permissions)"
      env:
        GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
